FROM frappe/erpnext:v15.65.4

# Set environment variables
ENV ERPNEXT_VERSION=v15.65.4

# Copy WebSocket setup script to a writable location
COPY websocket-setup.sh /tmp/websocket-setup.sh
RUN chmod +x /tmp/websocket-setup.sh && mv /tmp/websocket-setup.sh /websocket-setup.sh

# Expose port
EXPOSE 9000

# Start the WebSocket service
CMD ["/websocket-setup.sh"] 